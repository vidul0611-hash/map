<!DOCTYPE html>
<html>
<head>
  <title>Energy Planning Map</title>
  <meta charset="utf-8" />
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <style>
    #map { height: 100vh; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Geocoder (Search Box) -->
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

  <script>
    // ------------------------
    // 1. Create Map
    var map = L.map('map').setView([20.5937, 78.9629], 4); // Center on India

    // 2. Base map (OpenStreetMap)
    var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    // 3. Search Box
    L.Control.geocoder().addTo(map);

    // ------------------------
    // 4. Night Lights Layer (NASA VIIRS)
    var nightlights = L.tileLayer(
      "https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/VIIRS_SNPP_DayNightBand_CloudFree/2022-01-01/default/GoogleMapsCompatible_Level8/{z}/{y}/{x}.jpg",
      { attribution: "NASA VIIRS", maxZoom: 8 }
    ).addTo(map);

    // ------------------------
    // 5. Population Layer (sample GeoJSON)
    var populationData = {
      "type": "FeatureCollection",
      "features": [
        { "type": "Feature", "properties": { "population": 5000 },
          "geometry": { "type": "Point", "coordinates": [78.9629, 20.5937] } },
        { "type": "Feature", "properties": { "population": 10000 },
          "geometry": { "type": "Point", "coordinates": [77, 28] } }
      ]
    };

    var populationLayer = L.geoJSON(populationData, {
      onEachFeature: function(feature, layer) {
        layer.bindPopup("Population: " + feature.properties.population);
      },
      pointToLayer: function(feature, latlng) {
        return L.circleMarker(latlng, {
          radius: Math.sqrt(feature.properties.population) / 100,
          color: "blue",
          fillOpacity: 0.5
        });
      }
    }).addTo(map);

    // ------------------------
    // 6. Layer Control
    var overlays = {
      "Night Lights": nightlights,
      "Population": populationLayer
    };
    L.control.layers({}, overlays).addTo(map);

  </script>
</body>
</html>
